{% extends base_template_name %}

{% block title %}Tickets{% endblock %}

{% block style %}
<link href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css" rel="stylesheet">

{% endblock %}

{% block content%}
<div class="container">
    <div class="row">
        <div class="col">
            <h3>Tickets list</h3>
          </div>
          <div class="col col-lg-3">
            <a type="button" href="/dashboard/my_tickets/file_a_ticket" class="btn btn-success btn-block" style="color: white;"><i class="fa fa-plus" aria-hidden="true"></i>  Create New Ticket</a>

          </div>
    
    </div>

    <hr />
    <table  id="example" class="table table-striped table-bordered" style="width:100%">
        <thead>
            <tr>
                <th>Ticket No.</th>
                <th>Issue</th>
                <th>Due Date</th>
                <th>Priority</th>
                <th>Created At</th>
                <th>Status</th>
                <th>Assigned To</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for item in tickets %}
            <tr>
                <td>#{{ item.ticket_id }} </td>
                <td>{{ item.issue_type }} </td>
                <td>{{ item.finish_date }} </td>
                <td>{{ item.priority }} </td>
                <td>{{ item.created_at }} </td>
                <td> {% if item.status %}
                    {{ item.status.status }}
                {% else %}
                    Pending
                {% endif %}</td>
                <td>{{ item.assigned_to.username }} </td>
                <td>
                    <a type="button"  href="" class="btn btn-success"> <i class="fa fa-eye" aria-hidden="true"></i>  </a>
                    <a type="button"  href="" class="btn btn-danger"> <i class="fa fa-ban" aria-hidden="true"></i> </a>
                </td>

            </tr>
                {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}

{% block js %}
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>
<script>
    $(document).ready(function() {
        $('#example').DataTable();
    } );

</script>
{% endblock %}